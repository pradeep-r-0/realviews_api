{
  "version": 3,
  "sources": ["../../javascript/fuel_topup.js"],
  "sourcesContent": ["// app/javascript/fuel_topup.js\n\nconsole.log(\"fuel_topup.js loaded\");\n\ndocument.addEventListener(\"turbo:load\", () => {\n  const photoInput = document.querySelector(\"#fuel_topup_odometer_photo\");\n  const odometerField = document.querySelector(\"#fuel_topup_odometer_reading\");\n\n  console.log(\"photoInput:\", photoInput);\n  console.log(\"odometerField:\", odometerField);\n\n  if (!photoInput || !odometerField) return;\n\n  photoInput.addEventListener(\"change\", async () => {\n    console.log(\"Photo selected!\");\n\n    const file = photoInput.files[0];\n    if (!file) return;\n\n    const formData = new FormData();\n    formData.append(\"image\", file);\n\n    odometerField.placeholder = \"Reading\u2026 extracting from photo\u2026\";\n    odometerField.value = \"\";\n\n    try {\n      const response = await fetch(\"/odometer/read\", {\n        method: \"POST\",\n        body: formData\n      });\n      const data = await response.json();\n      console.log(\"OCR response:\", data);\n\n      if (data.odometer) {\n        odometerField.value = data.odometer;\n        odometerField.placeholder = \"\";\n      } else {\n        odometerField.placeholder = \"Could not detect numeric reading\";\n      }\n    } catch (err) {\n      console.error(\"OCR request error:\", err);\n      odometerField.placeholder = \"Error reading photo\";\n    }\n  });\n});\n"],
  "mappings": ";AAEA,QAAQ,IAAI,sBAAsB;AAElC,SAAS,iBAAiB,cAAc,MAAM;AAC5C,QAAM,aAAa,SAAS,cAAc,4BAA4B;AACtE,QAAM,gBAAgB,SAAS,cAAc,8BAA8B;AAE3E,UAAQ,IAAI,eAAe,UAAU;AACrC,UAAQ,IAAI,kBAAkB,aAAa;AAE3C,MAAI,CAAC,cAAc,CAAC,cAAe;AAEnC,aAAW,iBAAiB,UAAU,YAAY;AAChD,YAAQ,IAAI,iBAAiB;AAE7B,UAAM,OAAO,WAAW,MAAM,CAAC;AAC/B,QAAI,CAAC,KAAM;AAEX,UAAM,WAAW,IAAI,SAAS;AAC9B,aAAS,OAAO,SAAS,IAAI;AAE7B,kBAAc,cAAc;AAC5B,kBAAc,QAAQ;AAEtB,QAAI;AACF,YAAM,WAAW,MAAM,MAAM,kBAAkB;AAAA,QAC7C,QAAQ;AAAA,QACR,MAAM;AAAA,MACR,CAAC;AACD,YAAM,OAAO,MAAM,SAAS,KAAK;AACjC,cAAQ,IAAI,iBAAiB,IAAI;AAEjC,UAAI,KAAK,UAAU;AACjB,sBAAc,QAAQ,KAAK;AAC3B,sBAAc,cAAc;AAAA,MAC9B,OAAO;AACL,sBAAc,cAAc;AAAA,MAC9B;AAAA,IACF,SAAS,KAAK;AACZ,cAAQ,MAAM,sBAAsB,GAAG;AACvC,oBAAc,cAAc;AAAA,IAC9B;AAAA,EACF,CAAC;AACH,CAAC;",
  "names": []
}
