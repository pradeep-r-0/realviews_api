{
  "version": 3,
  "sources": ["../../javascript/google_places.js"],
  "sourcesContent": ["// app/javascript/google_places.js\nconsole.log(\"\u2705 google_places.js loaded \u2014 build version\", Date.now());\n\nfunction initAutocomplete() {\n  const input = document.getElementById(\"restaurant-input\");\n  if (!input) return;\n\n  // prevent multiple setups\n  if (input.dataset.autocompleteInitialized) return;\n  input.dataset.autocompleteInitialized = true;\n\n  // \u2705 Detect edit mode or readonly input\n  const isEditPage = window.location.pathname.match(/\\/dishes\\/\\d+\\/edit/);\n  if (input.readOnly || input.hasAttribute(\"readonly\") || isEditPage) {\n    console.log(\"\u2733\uFE0F Edit mode detected \u2014 skipping autocomplete setup & validation\");\n    return;\n  }\n\n  const placeIdField = document.getElementById(\"restaurant_place_id\");\n  const latField = document.getElementById(\"restaurant_lat\");\n  const lngField = document.getElementById(\"restaurant_lng\");\n\n  if (typeof google === \"undefined\" || !google.maps?.places) {\n    setTimeout(initAutocomplete, 500);\n    return;\n  }\n\n  const autocomplete = new google.maps.places.Autocomplete(input, {\n    types: [\"establishment\"],\n    componentRestrictions: { country: \"in\" },\n  });\n\n  let placeSelected = false;\n\n  autocomplete.addListener(\"place_changed\", () => {\n    const place = autocomplete.getPlace();\n    if (!place.place_id) return;\n    placeSelected = true;\n\n    if (placeIdField) placeIdField.value = place.place_id;\n    if (latField) latField.value = place.geometry.location.lat();\n    if (lngField) lngField.value = place.geometry.location.lng();\n  });\n\n  input.addEventListener(\"input\", () => {\n    placeSelected = false;\n    if (placeIdField) placeIdField.value = \"\";\n    if (latField) latField.value = \"\";\n    if (lngField) lngField.value = \"\";\n  });\n\n  const form = input.closest(\"form\");\n  if (form) {\n    form.addEventListener(\"submit\", (e) => {\n      // \u2705 Skip validation in edit mode or readonly\n      if (input.readOnly || input.hasAttribute(\"readonly\") || isEditPage) return;\n\n      if (!placeSelected) {\n        e.preventDefault();\n        alert(\"Please select a restaurant from the suggestions.\");\n        input.focus();\n      }\n    });\n  }\n}\n\ndocument.addEventListener(\"turbo:load\", initAutocomplete);\n"],
  "mappings": ";AACA,QAAQ,IAAI,uDAA6C,KAAK,IAAI,CAAC;AAEnE,SAAS,mBAAmB;AAC1B,QAAM,QAAQ,SAAS,eAAe,kBAAkB;AACxD,MAAI,CAAC,MAAO;AAGZ,MAAI,MAAM,QAAQ,wBAAyB;AAC3C,QAAM,QAAQ,0BAA0B;AAGxC,QAAM,aAAa,OAAO,SAAS,SAAS,MAAM,qBAAqB;AACvE,MAAI,MAAM,YAAY,MAAM,aAAa,UAAU,KAAK,YAAY;AAClE,YAAQ,IAAI,iFAAkE;AAC9E;AAAA,EACF;AAEA,QAAM,eAAe,SAAS,eAAe,qBAAqB;AAClE,QAAM,WAAW,SAAS,eAAe,gBAAgB;AACzD,QAAM,WAAW,SAAS,eAAe,gBAAgB;AAEzD,MAAI,OAAO,WAAW,eAAe,CAAC,OAAO,MAAM,QAAQ;AACzD,eAAW,kBAAkB,GAAG;AAChC;AAAA,EACF;AAEA,QAAM,eAAe,IAAI,OAAO,KAAK,OAAO,aAAa,OAAO;AAAA,IAC9D,OAAO,CAAC,eAAe;AAAA,IACvB,uBAAuB,EAAE,SAAS,KAAK;AAAA,EACzC,CAAC;AAED,MAAI,gBAAgB;AAEpB,eAAa,YAAY,iBAAiB,MAAM;AAC9C,UAAM,QAAQ,aAAa,SAAS;AACpC,QAAI,CAAC,MAAM,SAAU;AACrB,oBAAgB;AAEhB,QAAI,aAAc,cAAa,QAAQ,MAAM;AAC7C,QAAI,SAAU,UAAS,QAAQ,MAAM,SAAS,SAAS,IAAI;AAC3D,QAAI,SAAU,UAAS,QAAQ,MAAM,SAAS,SAAS,IAAI;AAAA,EAC7D,CAAC;AAED,QAAM,iBAAiB,SAAS,MAAM;AACpC,oBAAgB;AAChB,QAAI,aAAc,cAAa,QAAQ;AACvC,QAAI,SAAU,UAAS,QAAQ;AAC/B,QAAI,SAAU,UAAS,QAAQ;AAAA,EACjC,CAAC;AAED,QAAM,OAAO,MAAM,QAAQ,MAAM;AACjC,MAAI,MAAM;AACR,SAAK,iBAAiB,UAAU,CAAC,MAAM;AAErC,UAAI,MAAM,YAAY,MAAM,aAAa,UAAU,KAAK,WAAY;AAEpE,UAAI,CAAC,eAAe;AAClB,UAAE,eAAe;AACjB,cAAM,kDAAkD;AACxD,cAAM,MAAM;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EACH;AACF;AAEA,SAAS,iBAAiB,cAAc,gBAAgB;",
  "names": []
}
