{
  "version": 3,
  "sources": ["../../javascript/google_places.js"],
  "sourcesContent": ["// app/javascript/google_places.js\nconsole.log(\"\u2705 google_places.js loaded \u2014 build version\", Date.now());\n\nfunction initAutocomplete() {\n  const input = document.getElementById(\"restaurant-input\");\n  if (!input) return;\n\n  // prevent multiple setups\n  if (input.dataset.autocompleteInitialized) return;\n  input.dataset.autocompleteInitialized = true;\n\n  // \u2705 Detect edit mode or readonly input\n  const isEditPage = window.location.pathname.match(/\\/dishes\\/\\d+\\/edit/);\n  if (input.readOnly || input.hasAttribute(\"readonly\") || isEditPage) {\n    console.log(\"\u2733\uFE0F Edit mode detected \u2014 skipping autocomplete setup & validation\");\n    return;\n  }\n\n  const placeIdField = document.getElementById(\"restaurant_place_id\");\n  const latField = document.getElementById(\"restaurant_lat\");\n  const lngField = document.getElementById(\"restaurant_lng\");\n\n  if (typeof google === \"undefined\" || !google.maps?.places) {\n    setTimeout(initAutocomplete, 500);\n    return;\n  }\n\n  const autocomplete = new google.maps.places.Autocomplete(input, {\n    types: [\"establishment\"],\n    componentRestrictions: { country: \"in\" },\n  });\n\n  let placeSelected = false;\n\n  autocomplete.addListener(\"place_changed\", () => {\n    const place = autocomplete.getPlace();\n    if (!place.place_id) return;\n    placeSelected = true;\n\n    if (placeIdField) placeIdField.value = place.place_id;\n    if (latField) latField.value = place.geometry.location.lat();\n    if (lngField) lngField.value = place.geometry.location.lng();\n  });\n\n  input.addEventListener(\"input\", () => {\n    placeSelected = false;\n    if (placeIdField) placeIdField.value = \"\";\n    if (latField) latField.value = \"\";\n    if (lngField) lngField.value = \"\";\n  });\n\n  const form = input.closest(\"form\");\n  if (form) {\n    form.addEventListener(\"submit\", (e) => {\n      // \u2705 Skip validation in edit mode or readonly\n      if (input.readOnly || input.hasAttribute(\"readonly\") || isEditPage) return;\n\n      if (!placeSelected) {\n        e.preventDefault();\n        alert(\"Please select a restaurant from the suggestions.\");\n        input.focus();\n      }\n    });\n  }\n}\n\ndocument.addEventListener(\"turbo:load\", initAutocomplete);\n"],
  "mappings": ";;AACA,UAAQ,IAAI,uDAA6C,KAAK,IAAI,CAAC;AAEnE,WAAS,mBAAmB;AAC1B,UAAM,QAAQ,SAAS,eAAe,kBAAkB;AACxD,QAAI,CAAC,MAAO;AAGZ,QAAI,MAAM,QAAQ,wBAAyB;AAC3C,UAAM,QAAQ,0BAA0B;AAGxC,UAAM,aAAa,OAAO,SAAS,SAAS,MAAM,qBAAqB;AACvE,QAAI,MAAM,YAAY,MAAM,aAAa,UAAU,KAAK,YAAY;AAClE,cAAQ,IAAI,iFAAkE;AAC9E;AAAA,IACF;AAEA,UAAM,eAAe,SAAS,eAAe,qBAAqB;AAClE,UAAM,WAAW,SAAS,eAAe,gBAAgB;AACzD,UAAM,WAAW,SAAS,eAAe,gBAAgB;AAEzD,QAAI,OAAO,WAAW,eAAe,CAAC,OAAO,MAAM,QAAQ;AACzD,iBAAW,kBAAkB,GAAG;AAChC;AAAA,IACF;AAEA,UAAM,eAAe,IAAI,OAAO,KAAK,OAAO,aAAa,OAAO;AAAA,MAC9D,OAAO,CAAC,eAAe;AAAA,MACvB,uBAAuB,EAAE,SAAS,KAAK;AAAA,IACzC,CAAC;AAED,QAAI,gBAAgB;AAEpB,iBAAa,YAAY,iBAAiB,MAAM;AAC9C,YAAM,QAAQ,aAAa,SAAS;AACpC,UAAI,CAAC,MAAM,SAAU;AACrB,sBAAgB;AAEhB,UAAI,aAAc,cAAa,QAAQ,MAAM;AAC7C,UAAI,SAAU,UAAS,QAAQ,MAAM,SAAS,SAAS,IAAI;AAC3D,UAAI,SAAU,UAAS,QAAQ,MAAM,SAAS,SAAS,IAAI;AAAA,IAC7D,CAAC;AAED,UAAM,iBAAiB,SAAS,MAAM;AACpC,sBAAgB;AAChB,UAAI,aAAc,cAAa,QAAQ;AACvC,UAAI,SAAU,UAAS,QAAQ;AAC/B,UAAI,SAAU,UAAS,QAAQ;AAAA,IACjC,CAAC;AAED,UAAM,OAAO,MAAM,QAAQ,MAAM;AACjC,QAAI,MAAM;AACR,WAAK,iBAAiB,UAAU,CAAC,MAAM;AAErC,YAAI,MAAM,YAAY,MAAM,aAAa,UAAU,KAAK,WAAY;AAEpE,YAAI,CAAC,eAAe;AAClB,YAAE,eAAe;AACjB,gBAAM,kDAAkD;AACxD,gBAAM,MAAM;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF;AAEA,WAAS,iBAAiB,cAAc,gBAAgB;",
  "names": []
}
